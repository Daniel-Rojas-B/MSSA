<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:xct="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             x:Class="SoccerBettingApp.View.MatchListPage"
             Title="Upcoming Matches"
             BackgroundColor="#1A1A1A">

    <CollectionView ItemsSource="{Binding Matches}">
        <CollectionView.ItemTemplate>
            <DataTemplate>
                <Frame Margin="10" 
                       Padding="15" 
                       BorderColor="Transparent"
                       CornerRadius="20" 
                       HasShadow="True"
                       IsClippedToBounds="True">

                    <!-- Fancy Gradient Background -->
                    <Frame.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                            <GradientStop Color="#0F2027" Offset="0.0" />
                            <GradientStop Color="#203A43" Offset="0.5" />
                            <GradientStop Color="#2C5364" Offset="1.0" />
                        </LinearGradientBrush>
                    </Frame.Background>

                    <Grid ColumnDefinitions="2*,3*,2*,1*" 
                          ColumnSpacing="10" 
                          RowSpacing="10"
                          Padding="10">

                        <!-- First Column: Title and Date -->
                        <StackLayout Grid.Column="0" 
                                     VerticalOptions="Center" 
                                     Spacing="5">
                            <Label Text="{Binding DisplayTitle}" 
                                   FontAttributes="Bold" 
                                   FontSize="16" 
                                   TextColor="White"/>
                            <Label Text="{Binding DisplayDate}" 
                                   FontSize="12" 
                                   TextColor="#CCCCCC"/>
                        </StackLayout>

                        <!-- Second Column: Home, Tie, Away -->
                        <Grid Grid.Column="1" 
                              ColumnDefinitions="*,*,*" 
                              ColumnSpacing="10" 
                              VerticalOptions="Center">

                            <!-- Home -->
                            <StackLayout Grid.Column="0" 
                                         Spacing="5" 
                                         HorizontalOptions="Center">
                                <Label Text="Home" 
                                       FontAttributes="Bold" 
                                       FontSize="14" 
                                       TextColor="White" 
                                       HorizontalOptions="Center"/>
                                <Frame BorderColor="#D0D0D0" 
                                       CornerRadius="8" 
                                       Padding="10" 
                                       HeightRequest="50" 
                                       WidthRequest="50"
                                       BackgroundColor="{Binding HomeSelected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='Home'}">
                                    <Frame.GestureRecognizers>
                                        <TapGestureRecognizer Command="{Binding SelectHomeCommand}"/>
                                    </Frame.GestureRecognizers>
                                    <Label Text="{Binding HomeValue}" 
                                           FontSize="14" 
                                           TextColor="#333333" 
                                           HorizontalOptions="Center" 
                                           VerticalOptions="Center"/>
                                </Frame>
                            </StackLayout>

                            <!-- Tie -->
                            <StackLayout Grid.Column="1" 
                                         Spacing="5" 
                                         HorizontalOptions="Center">
                                <Label Text="Tie" 
                                       FontAttributes="Bold" 
                                       FontSize="14" 
                                       TextColor="White" 
                                       HorizontalOptions="Center"/>
                                <Frame BorderColor="#D0D0D0" 
                                       CornerRadius="8" 
                                       Padding="10" 
                                       HeightRequest="50" 
                                       WidthRequest="50"
                                       BackgroundColor="{Binding TieSelected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='Tie'}">
                                    <Frame.GestureRecognizers>
                                        <TapGestureRecognizer Command="{Binding SelectTieCommand}"/>
                                    </Frame.GestureRecognizers>
                                    <Label Text="{Binding TieValue}" 
                                           FontSize="14" 
                                           TextColor="#333333" 
                                           HorizontalOptions="Center" 
                                           VerticalOptions="Center"/>
                                </Frame>
                            </StackLayout>

                            <!-- Away -->
                            <StackLayout Grid.Column="2" 
                                         Spacing="5" 
                                         HorizontalOptions="Center">
                                <Label Text="Away" 
                                       FontAttributes="Bold" 
                                       FontSize="14" 
                                       TextColor="White" 
                                       HorizontalOptions="Center"/>
                                <Frame BorderColor="#D0D0D0" 
                                       CornerRadius="8" 
                                       Padding="10" 
                                       HeightRequest="50" 
                                       WidthRequest="50"
                                       BackgroundColor="{Binding AwaySelected, Converter={StaticResource BoolToColorConverter}, ConverterParameter='Away'}">
                                    <Frame.GestureRecognizers>
                                        <TapGestureRecognizer Command="{Binding SelectAwayCommand}"/>
                                    </Frame.GestureRecognizers>
                                    <Label Text="{Binding AwayValue}" 
                                           FontSize="14" 
                                           TextColor="#333333" 
                                           HorizontalOptions="Center" 
                                           VerticalOptions="Center"/>
                                </Frame>
                            </StackLayout>
                        </Grid>

                        <!-- Third Column: Bet Amount -->
                        <StackLayout Grid.Column="2" 
                                     VerticalOptions="Center" 
                                     Spacing="5">
                            <Label Text="Bet" 
                                   FontAttributes="Bold" 
                                   FontSize="14" 
                                   TextColor="White" 
                                   HorizontalOptions="Center"/>
                            <Frame BorderColor="Transparent" 
                                   CornerRadius="8" 
                                   Padding="10" 
                                   WidthRequest="70"
                                   BackgroundColor="White">
                                <Entry Text="{Binding BetAmount}" 
                                       Keyboard="Numeric" 
                                       TextColor="#333333" 
                                       FontSize="9" 
                                       Placeholder="Amount" 
                                       HorizontalOptions="FillAndExpand" 
                                       VerticalOptions="Center"/>
                            </Frame>
                        </StackLayout>

                        <!-- Fourth Column: Bet Button -->
                        <Button Grid.Column="3" 
                                Text="Bet" 
                                BackgroundColor="#00C853" 
                                TextColor="White" 
                                FontAttributes="Bold" 
                                FontSize="14" 
                                CornerRadius="10" 
                                HeightRequest="50" 
                                VerticalOptions="Center" 
                                HorizontalOptions="Center" 
                                Command="{Binding PlaceBetCommand}"/>
                    </Grid>

                </Frame>
            </DataTemplate>
        </CollectionView.ItemTemplate>
    </CollectionView>
</ContentPage>
